server {
    listen 80;
    listen [::]:80;

    server_name login.no *.login.no;
    return 301 https://$host$request_uri;
}

server {
    listen 443;
    listen [::]:443;

    server_name internal.login.no;
    include snippets/errors.conf;

    location / {
        proxy_pass http://localhost:8000;
        include snippets/proxy-headers.conf;
    }
}

server {
    listen 443;
    listen [::]:443;

    server_name queenbee.login.no;
    include snippets/errors.conf;

    location / {
        access_by_lua_file /etc/nginx/lua/traffic_logger.lua;
        proxy_pass http://localhost:8050;
        include snippets/proxy-headers.conf;
    }
}

server {
    listen 443;
    listen [::]:443;

    server_name api.tekkom-bot.login.no;
    include snippets/errors.conf;

    location / {
        access_by_lua_file /etc/nginx/lua/traffic_logger.lua;
        proxy_pass http://localhost:8080;
        include snippets/proxy-headers.conf;
    }
}

server {
    listen 443;
    listen [::]:443;

    server_name app.login.no;
    include snippets/errors.conf;

    location / {
        access_by_lua_file /etc/nginx/lua/traffic_logger.lua;
        proxy_pass http://localhost:8100;
        include snippets/proxy-headers.conf;
    }
}

server {
    listen 443;
    listen [::]:443;

    server_name beekeeper.login.no;
    include snippets/errors.conf;

    location / {
        access_by_lua_file /etc/nginx/lua/traffic_logger.lua;
        proxy_pass http://localhost:8200;
        include snippets/proxy-headers.conf;
    }
}

server {
    listen 443;
    listen [::]:443;

    server_name api.beekeeper.login.no;
    include snippets/errors.conf;

    location / {
        access_by_lua_file /etc/nginx/lua/traffic_logger.lua;
        proxy_pass http://localhost:8201;
        include snippets/proxy-headers.conf;
    }
}

server {
    listen 443;
    listen [::]:443;

    server_name exam.login.no studentbee.login.no;
    include snippets/errors.conf;

    location / {
        access_by_lua_file /etc/nginx/lua/traffic_logger.lua;
        proxy_pass http://localhost:8400;
        include snippets/proxy-headers.conf;
    }
}

server {
    listen 443;
    listen [::]:443;

    server_name api.exam.login.no studentbee-api.login.no;
    include snippets/errors.conf;

    location / {
        access_by_lua_file /etc/nginx/lua/traffic_logger.lua;
        proxy_pass http://localhost:8401;
        include snippets/proxy-headers.conf;
    }
}

server {
    listen 443;
    listen [::]:443;

    server_name workerbee.login.no;
    include snippets/errors.conf;

    location / {
        access_by_lua_file /etc/nginx/lua/traffic_logger.lua;
        proxy_pass http://localhost:8500;
        include snippets/proxy-headers.conf;
    }
}

server {
    listen 443;
    listen [::]:443;

    server_name beeswarm.login.no;
    include snippets/errors.conf;

    location / {
        access_by_lua_file /etc/nginx/lua/traffic_logger.lua;
        proxy_pass http://localhost:8600;
        include snippets/proxy-headers.conf;
    }
}

server {
    listen 443;
    listen [::]:443;

    server_name api.beeswarm.login.no;
    include snippets/errors.conf;

    location / {
        access_by_lua_file /etc/nginx/lua/traffic_logger.lua;
        proxy_pass http://localhost:8601;
        include snippets/proxy-headers.conf;
    }
}

server {
    listen 443;
    listen [::]:443;

    server_name gatherbee.login.no;
    include snippets/errors.conf;

    location / {
        access_by_lua_file /etc/nginx/lua/traffic_logger.lua;
        proxy_pass http://localhost:8700;
        include snippets/proxy-headers.conf;
    }
}

server {
    listen 443;
    listen [::]:443;

    server_name login.no *.login.no;
    include snippets/errors.conf;

    location / {
        access_by_lua_file /etc/nginx/lua/traffic_logger.lua;
        proxy_pass http://localhost:3000;
        include snippets/proxy-headers.conf;
    }
}
